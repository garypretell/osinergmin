<mat-card [ngStyle]="{ 'margin-bottom': '10px' }">
  <h1>Reporte de Saldos Vacacionales</h1>
  <div
    fxLayout="row"
    fxLayoutGap="25px"
    fxLayout.xs="column"
    [ngStyle]="{ 'margin-bottom': '10px' }"
  >
    <div fxFlex="100">
      <mat-accordion
        class="example-headers-align"
        multi
        [ngStyle]="{ 'margin-bottom': '10px' }"
      >
        <mat-expansion-panel>
          <mat-expansion-panel-header>
            <mat-panel-title> Filtrar </mat-panel-title>
            <mat-panel-description>
              <ng-container *ngIf="filtros.length > 0; else space">
                Filtros ({{filtros.length }})
              </ng-container>
              <ng-template #space> &nbsp;</ng-template>
              <!-- <mat-icon>filter_list</mat-icon> -->
            </mat-panel-description>
          </mat-expansion-panel-header>

          <mat-card [ngStyle]="{ 'margin-bottom': '10px' }">
            <form [formGroup]="addFilterForm" (ngSubmit)="filtrar()">
              <div
                fxLayoutGap="25px"
                fxLayout="row"
                fxLayout.xs="column"
                fxFlexFill
                [ngStyle]="{ 'margin-bottom': '10px' }"
              >
                <div fxFlex="23">
                  <mat-form-field
                    class="example-full-width"
                    appearance="legacy"
                  >
                    <mat-label>Número de Identificación</mat-label>
                    <input
                      name="identificacion"
                      formControlName="identificacion"
                      matInput
                      type="text"
                    />
                  </mat-form-field>
                </div>
                <div fxFlex="23">
                  <mat-form-field
                    class="example-full-width"
                    appearance="legacy"
                  >
                    <mat-label>Nombres</mat-label>
                    <input
                      name="nombres"
                      formControlName="nombres"
                      matInput
                      type="text"
                      class="text-uppercase"
                    />
                  </mat-form-field>
                </div>
                <div fxFlex="23">
                  <mat-form-field
                    class="example-full-width"
                    appearance="legacy"
                  >
                    <mat-label>Apellidos</mat-label>
                    <input
                      name="apellidos"
                      formControlName="apellidos"
                      matInput
                      type="text"
                      class="text-uppercase"
                    />
                  </mat-form-field>
                </div>
                <div fxFlex="23">
                  <mat-form-field
                    class="example-full-width"
                    appearance="legacy"
                  >
                    <mat-label>Periodo</mat-label>
                    <mat-select formControlName="periodo">
                      <mat-option>-- None --</mat-option>
                      <mat-option
                        *ngFor="let item of listaPeriodos"
                        [value]="item"
                        >{{ item.descPeriodo }}</mat-option
                      >
                    </mat-select>
                  </mat-form-field>
                </div>
              </div>
              <div
                fxLayoutGap="25px"
                fxLayout="row"
                fxLayout.xs="column"
                fxFlexFill
                [ngStyle]="{ 'margin-bottom': '10px' }"
              >
                <div fxFlex="23">
                  <mat-form-field
                    class="example-full-width"
                    appearance="legacy"
                  >
                    <mat-label>Fecha de Ingreso</mat-label>
                    <input
                      matInput
                      readonly
                      [matDatepicker]="picker"
                      formControlName="fecha_Ingreso"
                      name="fechaInicio"
                    />
                    <mat-hint>DD/MM/YYYY</mat-hint>
                    <mat-datepicker-toggle
                      matSuffix
                      [for]="picker"
                    ></mat-datepicker-toggle>
                    <mat-datepicker #picker></mat-datepicker>
                  </mat-form-field>
                </div>
                <div fxFlex="23">
                  <mat-form-field
                    class="example-full-width"
                    appearance="legacy"
                  >
                    <mat-label>Fecha de Vencimiento</mat-label>
                    <input
                      matInput
                      readonly
                      [matDatepicker]="picker1"
                      formControlName="fecha_Vencimiento"
                      name="fechaFin"
                    />
                    <mat-hint>DD/MM/YYYY</mat-hint>
                    <mat-datepicker-toggle
                      matSuffix
                      [for]="picker1"
                    ></mat-datepicker-toggle>
                    <mat-datepicker #picker1></mat-datepicker>
                  </mat-form-field>
                </div>
                <div fxFlex="23">
                  <mat-form-field appearance="legacy">
                    <mat-label>Gerencia</mat-label>
                    <mat-select formControlName="gerencia">
                      <mat-option>-- None --</mat-option>
                      <mat-option
                        *ngFor="let item of listaGerencias"
                        [value]="item"
                        >{{ item.descripcion }}</mat-option
                      >
                    </mat-select>
                  </mat-form-field>
                </div>
                <div fxFlex="23">
                  <mat-form-field appearance="legacy">
                    <mat-label>Modalidad</mat-label>
                    <mat-select formControlName="modalidad">
                      <mat-option>-- None --</mat-option>
                      <mat-option
                        *ngFor="let item of listaModalidades"
                        [value]="item"
                        >{{ item.descripcion }}</mat-option
                      >
                    </mat-select>
                  </mat-form-field>
                </div>
              </div>
              <div
                fxLayoutGap="25px"
                fxLayout="row"
                fxLayout.xs="column"
                fxFlexFill
                fxLayoutAlign="end center"
                [ngStyle]="{ 'margin-bottom': '10px' }"
              >
                <div>
                  <button mat-raised-button color="primary" type="submit">
                    Filtrar
                  </button>
                </div>
                <div></div>
              </div>
            </form>
          </mat-card>
          <mat-form-field class="example-chip-list" appearance="legacy"  *ngIf="filtros.length > 0">
            <mat-chip-list #chipList aria-label="Mock selection">
              <mat-chip
                *ngFor="let filtro of filtros"
                [selectable]="selectable"
                [removable]="removable"
                (removed)="remove(filtro)"
                color="primary"
                selected
              >
                {{ filtro.id | uppercase | filter_format }}: {{ filtro.name }}
                <mat-icon matChipRemove *ngIf="removable">cancel</mat-icon>
              </mat-chip>
            </mat-chip-list>
          </mat-form-field>
          <mat-datepicker #picker></mat-datepicker>
          <div fxLayout="row" fxLayoutAlign="center center">
            <button
              mat-raised-button
              color="warn"
              type="button"
              *ngIf="filtros.length > 0"
              (click)="clearAll()"
            >
              Limpiar
            </button>
          </div>
        </mat-expansion-panel>
      </mat-accordion>

      <div
        fxLayout="row"
        fxLayoutGap="25px"
        fxLayoutAlign.lg="end center"
        [fxLayoutAlign.lt-lg]="'center center'"
        [ngStyle]="{ 'margin-bottom': '10px', 'margin-top': '10px' }"
      >
      <button mat-button class="btnpdf" type="button" (click)="exportAsXLSX()">
        <span> Descargar</span>
      </button>
        <button
          mat-button
          class="btnexcel"
          type="button"
          (click)="downloadExcelRecord()"
        >
          <i class="fas fa-file-excel"></i>
          <span> Xls</span>
        </button>
      </div>
      
      <ngx-datatable
        id="datatable"
        class="material contenedor"
        [rows]="rows"
        [columns]="columnas"
        [sortType]="SortType.multi"
        [columnMode]="ColumnMode.standard"
        [headerHeight]="50"
        [footerHeight]="50"
        rowHeight="auto"
        [reorderable]="true"
        [limit]="5"
        [loadingIndicator]="loadingIndicator"
        [scrollbarH]="true"
        [messages]="{
          emptyMessage: 'No hay resultados disponibles.',
          totalMessage: 'solicitudes'
        }"
      >
      </ngx-datatable>
    </div>
  </div>
</mat-card>
